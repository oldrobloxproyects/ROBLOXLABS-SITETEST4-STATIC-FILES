!function(){"use strict";var t={n:function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,{a:n}),n},d:function(e,n){for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},o:function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}},e=jQuery,c=t.n(e),d=Roblox;function o(e){var n=new(c().Deferred);return d.Hybrid.Game.launchGame(e,function(){n.resolve(e)}),n}var n,a,r={joinMultiplayerGame:function(e){var n=!0===e.isPlayTogetherGame;return o({requestType:d.Hybrid.Game.LAUNCH_MODES.SIMPLE_GAME,placeId:e.placeId.toString(),isPlayTogetherGame:n,browserTrackerId:d.Cookies.getBrowserTrackerId()})},followPlayerIntoGame:function(e){return o({requestType:d.Hybrid.Game.LAUNCH_MODES.FOLLOW_USER,userId:e.userId.toString(),browserTrackerId:d.Cookies.getBrowserTrackerId()})},joinGameInstance:function(e){var n=!0===e.isPlayTogetherGame;return o({requestType:d.Hybrid.Game.LAUNCH_MODES.GAME_INSTANCE,placeId:e.placeId.toString(),instanceId:e.gameId,isPlayTogetherGame:n,browserTrackerId:d.Cookies.getBrowserTrackerId()})},joinPrivateGame:function(e){return o({requestType:d.Hybrid.Game.LAUNCH_MODES.PRIVATE_SERVER,placeId:e.placeId.toString(),accessCode:e.accessCode,browserTrackerId:d.Cookies.getBrowserTrackerId()})},playTogetherGame:function(e){return o({requestType:d.Hybrid.Game.LAUNCH_MODES.SIMPLE_GAME,placeId:e.placeId.toString(),conversationId:e.conversationId.toString(),browserTrackerId:d.Cookies.getBrowserTrackerId()})}},l={modalClassName:"soli-modal",loginUrl:"/login?returnurl=",signupUrl:"/?returnurl=",eventContext:"gameDetails",loginField:"gameLaunch_login",signupField:"gameLaunch_signup"};c()(document).ready(function(){n=new d.TranslationResourceProvider,a=n.getTranslationResource("Feature.GameLaunchGuestMode")});var i={restrictGuests:function(e){var n=new(c().Deferred);return"True"===c()("#PlaceLauncherStatusPanel").data("is-user-logged-in")?n.resolve(e):d.Dialog.open({titleText:a.get("Heading.Dialog.SignUpOrLogin"),bodyContent:a.get("Description.Dialog.SignUpOrLogin"),cssClass:l.modalClassName,acceptColor:d.Dialog.green,acceptText:a.get("Action.Dialog.SignUp"),declineText:a.get("Action.Dialog.Login"),onDecline:function(){d.FormEvents&&d.FormEvents.SendInteractionClick(l.eventContext,l.loginField);var e=l.loginUrl+encodeURIComponent(window.location.pathname+window.location.search);window.location.href=d.Endpoints?d.Endpoints.getAbsoluteUrl(e):e},onAccept:function(){var e;e=l.signupField,d.FormEvents&&d.FormEvents.SendInteractionClick("gameDetails",e),e=l.signupUrl+encodeURIComponent(window.location.pathname+window.location.search),window.location.href=d.Endpoints?d.Endpoints.getAbsoluteUrl(e):e}}),n}},s={bars:[],init:function(e,n,o,t){var a=this.get(e);null==a&&(a={}),a.barID=e,a.innerBarID=n,a.percentageID=o,void 0===t&&(a.percentComplete=0),this.bars.push(a),this.update(e,a.percentComplete)},get:function(e){for(var n=0;n<this.bars.length;n+=1)if(this.bars[n].barID===e)return this.bars[n];return null},dispose:function(e){for(var n=0;n<this.bars.length;n+=1)this.bars[n].barID===e&&this.bars.splice(n,1)},update:function(e,n){var o=this.get(e);o&&(1<n&&(n=1),e=c()("#".concat(e)).width(),e=Math.round(e*n),c()("#".concat(o.innerBarID)).animate({width:e},200,"swing"),o.percentageID&&0<c()("#".concat(o.percentageID)).length&&c()("#".concat(o.percentageID)).html("".concat(Math.round(100*n),"%")),o.percentComplete=n)}},u={newValue:"",showVideoPreRoll:!1,videoInitialized:!1,videoStarted:!1,videoCompleted:!1,videoSkipped:!1,videoCancelled:!1,videoErrored:!1,loadingBarMaxTime:3e4,loadingBarCurrentTime:0,loadingBarIntervalID:0,loadingBarID:"videoPrerollLoadingBar",loadingBarInnerID:"videoPrerollLoadingBarCompleted",loadingBarPercentageID:"videoPrerollLoadingPercent",videoDiv:"videoPrerollMainDiv",companionAdDiv:"videoPrerollCompanionAd",contentElement:"contentElement",videoLoadingTimeout:7e3,videoPlayingTimeout:23e3,videoLogNote:"",logsEnabled:!1,includedPlaceIds:"",isSwfPreloaderEnabled:!1,isFlashInstalled:!1,isPrerollShownEveryXMinutesEnabled:!1,isAgeTargetingEnabled:!0,isAgeOrSegmentTargetingEnabled:!1,adUnit:"",adTime:0,placeId:0,customTargeting:{userAge:"",userAgeOrSegment:"",userGender:"",gameGenres:"",environment:"",adTime:"",PLVU:!1},adsManager:null,adsLoader:null,adDisplayContainer:null,intervalTimer:null,videoContent:null,isCompanionAdRenderedByGoogleTag:!1};function g(){u.adsLoader.contentComplete()}function m(){u.videoContent=document.getElementById(u.contentElement)}function p(){u.adDisplayContainer=new window.google.ima.AdDisplayContainer(document.getElementById(u.videoDiv),u.videoContent)}function h(){var e="&iu=".concat(u.adUnit),n="";u.isAgeTargetingEnabled&&(n+="&Age=".concat(u.customTargeting.userAge)),u.isAgeOrSegmentTargetingEnabled&&(n+="&A=".concat(u.customTargeting.userAgeOrSegment));n=encodeURIComponent("Env=".concat(u.customTargeting.environment,"&Gender=").concat(u.customTargeting.userGender).concat(n,"&Genres=").concat(u.customTargeting.gameGenres,"&PlaceID=").concat(u.placeId,"&Time=").concat(u.customTargeting.adTime,"&PLVU=").concat(u.customTargeting.PLVU));return"".concat("http://pubads.g.doubleclick.net/gampad/ads?impl=s&gdfp_req=1&env=vp&output=xml_vast2&unviewed_position_start=1&url=[referrer_url]&description_url=[description_url]&correlator=[timestamp]").concat("&sz=400x300").concat(e).concat("&ciu_szs=300x250","&cust_params=").concat(n,"&")}function v(){window.googletag.defineSlot(u.adUnit,[300,250],u.companionAdDiv).addService(window.googletag.companionAds()),window.googletag.enableServices(),window.googletag.display(u.companionAdDiv)}function f(e){switch(e.type){case window.google.ima.AdEvent.Type.LOADED:break;case window.google.ima.AdEvent.Type.STARTED:if(u.videoStarted=!0,u.isCompanionAdRenderedBywindow.googletag){if(!window.googletag)break;window.googletag.cmd.push(v)}else{var n=e.getAd().getCompanionAds(300,250);0<n.length&&(n=n[0].getContent(),document.getElementById(u.companionAdDiv).innerHTML=n)}break;case window.google.ima.AdEvent.Type.SKIPPED:u.videoCompleted=!0,u.videoSkipped=!0,u.showVideoPreRoll=!1;break;case window.google.ima.AdEvent.Type.COMPLETE:u.videoStarted&&!1===u.videoCancelled&&(u.videoCompleted=!0,u.showVideoPreRoll=!1,""!==u.newValue&&c().cookie("RBXVPR",u.newValue,180))}}function w(){u.videoErrored=!0,u.videoCompleted=!0,u.videoLogNote="AdError"}function I(e){u.adsManager=e.getAdsManager(u.videoContent),u.adsManager.addEventListener(window.google.ima.AdErrorEvent.Type.AD_ERROR,w),u.adsManager.addEventListener(window.google.ima.AdEvent.Type.ALL_ADS_COMPLETED,f),u.adsManager.addEventListener(window.google.ima.AdEvent.Type.LOADED,f),u.adsManager.addEventListener(window.google.ima.AdEvent.Type.STARTED,f),u.adsManager.addEventListener(window.google.ima.AdEvent.Type.SKIPPED,f),u.adsManager.addEventListener(window.google.ima.AdEvent.Type.COMPLETE,f);try{u.adsManager.init(400,300,window.google.ima.ViewMode.NORMAL),u.adsManager.start()}catch(e){w()}}function P(){window.google.ima.settings.setVpaidAllowed(!0),m(),p(),u.adDisplayContainer.initialize(),u.adsLoader=new window.google.ima.AdsLoader(u.adDisplayContainer),u.adsLoader.addEventListener(window.google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,I,!1),u.adsLoader.addEventListener(window.google.ima.AdErrorEvent.Type.AD_ERROR,w,!1),u.videoContent.addEventListener("ended",g);var e=new window.google.ima.AdsRequest,n=h();e.adTagUrl=n,e.linearAdSlotWidth=400,e.linearAdSlotHeight=300,e.nonLinearAdSlotWidth=400,e.nonLinearAdSlotHeight=300,u.adsLoader.requestAds(e)}function C(){var n=!1;try{new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash")&&(n=!0)}catch(e){navigator.mimeTypes&&void 0!==navigator.mimeTypes["application/x-shockwave-flash"]&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(n=!0)}return n}function E(){if(u.logsEnabled){var e="";if(u.videoCompleted)e="Complete",""===u.videoLogNote&&(u.videoLogNote="NoTimeout"),u.logsEnabled=!1;else if(u.videoCancelled)e="Cancelled",u.videoLogNote=window.RobloxLaunch.state;else{if(!1!==u.videoInitialized||""===u.videoLogNote)return;e="Failed",u.logsEnabled=!1}d.GaEventSettings.gaDFPPreRollEnabled&&window.GoogleAnalyticsEvents&&window.GoogleAnalyticsEvents.FireEvent(["DFPPreRoll",e,u.videoLogNote])}}function b(){return!!u.videoInitialized&&(u.videoInitialized&&!u.videoStarted&&u.loadingBarCurrentTime>u.videoLoadingTimeout&&(u.videoCompleted=!0,u.videoLogNote="LoadingTimeout"),u.videoStarted&&!u.videoCompleted&&u.loadingBarCurrentTime>u.videoPlayingTimeout&&(u.videoCompleted=!0,u.videoLogNote="PlayingTimeout"),!u.videoCompleted)}function y(){var e=encodeURIComponent(h()),e="adTagUrl=".concat(e);c().ajax({url:"/game/preloader",data:{url:e},method:"GET",crossDomain:!0,xhrFields:{withCredentials:!0}}).success(function(e){c()("#videoPrerollMainDiv").html(e),u.videoErrored||(u.videoStarted=!0)})}function L(){c().ajax({url:"/game/updateprerollcount",method:"GET",crossDomain:!0,xhrFields:{withCredentials:!0}})}Object.assign(u,{contentEndedListener:g,createVideoContent:m,createAdDisplayContainer:p,constructUrl:h,renderCompanionAd:v,onAdEvent:f,onAdError:w,onAdsManagerLoaded:I,requestAds:P,checkFlashEnabled:C,checkEligibility:function(){u.showVideoPreRoll&&(C()&&(u.isFlashInstalled=!0),"True"===c()("#PlaceLauncherStatusPanel").data("is-protocol-handler-launch-enabled")||d.Client.IsRobloxInstalled()?void 0===window.google||void 0===window.google.ima?(u.videoLogNote="NoGoogle",u.showVideoPreRoll=!1):d.Client.isIDE()?(u.videoLogNote="RobloxStudio",u.showVideoPreRoll=!1):d.Client.isRobloxBrowser()?(u.videoLogNote="RobloxPlayer",u.showVideoPreRoll=!1):(window.chrome||window.safari)&&"#chromeInstall"===window.location.hash&&(u.showVideoPreRoll=!1):u.showVideoPreRoll=!1)},logVideoPreRoll:E,isPlaying:b,correctIEModalPosition:function(e){var n,o;e.container.innerHeight()<=30&&(n=c()("#videoPrerollPanel"),o=-Math.floor(n.innerHeight()/2),n.css({position:"relative",top:"".concat(o,"px")}),e.container.find(".VprCloseButton").css({top:"".concat(o-10,"px"),"z-index":"1003"}))},renderImaPreloader:y,updatePrerollCount:L,start:function(){0===u.placeId&&"undefined"!=typeof play_placeId&&(u.placeId=play_placeId),u.videoInitialized=!0,u.videoStarted=!1,u.videoCancelled=!1,u.videoCompleted=!1,u.videoSkipped=!1,u.loadingBarCurrentTime=0,u.videoLogNote="",s.init(u.loadingBarID,u.loadingBarInnerID,u.loadingBarPercentageID),u.loadingBarIntervalID=setInterval(function(){u.loadingBarCurrentTime+=1e3,s.update(u.loadingBarID,u.loadingBarCurrentTime/u.loadingBarMaxTime)},1e3),(u.isSwfPreloaderEnabled&&u.isFlashInstalled?y:P)()},cancel:function(){u.videoCancelled=!0,c().modal.close()},skip:function(){u.videoCompleted=!0,u.videoSkipped=!0,u.showVideoPreRoll=!1},close:function(){window.MadStatus&&window.MadStatus.running&&window.MadStatus.stop(""),window.RobloxLaunch.launcher&&(window.RobloxLaunch.launcher._cancelled=!0),clearInterval(u.loadingBarIntervalID),s.dispose(u.loadingBarID),b()&&(u.videoCancelled=!0),c().modal.close(),E(),u.isPrerollShownEveryXMinutesEnabled&&u.videoInitialized&&u.videoCompleted&&L()}});var S=u,T={waitForPreroll:function(e){var n,o,t=new(c().Deferred),a=S;return a.placeId=void 0!==e.placeId?e.placeId:0,a.showVideoPreRoll?(n={escClose:!0,opacity:80,overlayCss:{backgroundColor:"#000"},zIndex:1031,onShow:function(e){a.correctIEModalPosition(e),a.start(),c()("#prerollClose").hide(),c()("#prerollClose").delay(1e3*a.adTime).show(300)},onClose:function(){a.close()},closeHTML:'<a href="#" id="prerollClose" class="ImageButton closeBtnCircle_35h ABCloseCircle VprCloseButton"></a>'},c()("#videoPrerollPanel").modal(n),o=setInterval(function(){a.isPlaying()||(c().modal.close(),clearInterval(o),a.videoCancelled?t.reject(e):t.resolve(e))},200)):(t.resolve(e),a.logVideoPreRoll()),t}};function A(e,n,o,t,a,r,l){try{var i=e[r](l),c=i.value}catch(e){return void o(e)}i.done?n(c):Promise.resolve(c).then(t,a)}var D,G={gameLaunchInterface:null,gameLaunchLogger:null,initialized:new Promise(function(e,n){D=e})};function x(e,n,o){G.gameLaunchInterface.editGameInStudio(e,n,o)}function R(e){e={placeId:e,isPlayTogetherGame:!0===(2<arguments.length?arguments[2]:void 0)};return i.restrictGuests(e).then(T.waitForPreroll).then(G.gameLaunchInterface.joinMultiplayerGame)}function M(){var i;return i=regeneratorRuntime.mark(function e(n,o,t){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.initialized;case 2:return a={placeId:n,accessCode:o,linkCode:t},a=T.waitForPreroll(a).then(G.gameLaunchInterface.joinPrivateGame),e.abrupt("return",a);case 5:case"end":return e.stop()}},e)}),(M=function(){var e=this,l=arguments;return new Promise(function(n,o){var t=i.apply(e,l);function a(e){A(t,n,o,a,r,"next",e)}function r(e){A(t,n,o,a,r,"throw",e)}a(void 0)})}).apply(this,arguments)}c().fn.bindGameLaunch=function(){return this.find(".VisitButtonPlayGLI").click(function(){var e=c()(this);R(e.attr("placeid"),e.data("is-membership-level-ok"))}),this.find(".VisitButtonEditGLI").click(function(){var e=c()(this);x(e.attr("placeid"),e.data("universeid"),!!e.data("allowupload"))}),this},c()(document).ready(function(){c()("body").bindGameLaunch()}),Object.assign(G,{authenticationChecker:i,prerollPlayer:T,joinMultiplayerGame:R,openStudio:function(){G.gameLaunchInterface.openStudio()},returnToStudio:function(){G.gameLaunchInterface.returnToStudio()},openPluginInStudio:function(e){G.gameLaunchInterface.openPluginInStudio(e)},editGameInStudio:x,followPlayerIntoGame:function(e){return e={userId:e},i.restrictGuests(e).then(T.waitForPreroll).then(G.gameLaunchInterface.followPlayerIntoGame)},joinGameInstance:function(e,n,o,t){return t={placeId:e,gameId:n,isPlayTogetherGame:!0===t},i.restrictGuests(t).then(T.waitForPreroll).then(G.gameLaunchInterface.joinGameInstance)},joinPrivateGame:function(e,n,o){return M.apply(this,arguments)},playTogetherGame:function(e,n){return n={placeId:e,conversationId:n},i.restrictGuests(n).then(T.waitForPreroll).then(G.gameLaunchInterface.playTogetherGame)},setGameLaunchInterface:function(e){G.gameLaunchInterface=e,D()},setGameLaunchLogger:function(e){G.gameLaunchLogger=e},tryAssetInStudio:function(e){G.gameLaunchInterface.tryAssetInStudio(e)},startClientAttemptedEvent:"startClientAttempted",startClientFailedEvent:"startClientFailed",startClientSucceededEvent:"startClientSucceeded",beginInstallEvent:"beginInstall",successfulInstallEvent:"successfulInstall",manualDownloadEvent:"manualDownload"});var k=G,B={lastContext:"unknown",contextCategories:{joinUser:"JoinUser"}};function U(e,n){var o=c()("#PlaceLauncherStatusPanel");return{lType:o&&o.data("is-protocol-handler-launch-enabled")&&"true"===o.data("is-protocol-handler-launch-enabled").toLowerCase()?"protocol":"plugin",pid:e,refuid:n,pg:(o=window.location.pathname.toLowerCase(),e="profile",-1!==(n=o.lastIndexOf(e))&&o.length===n+e.length?e:-1!==o.indexOf("/develop")?"develop":"gameDetail")}}function O(e,n,o,t){null!==n&&""!==n&&"unknown"!==n&&(B.lastContext=n),d.EventStream.SendEvent(e,B.lastContext,U(o,t))}Object.assign(B,{SendGamePlayIntent:function(e,n,o){O("gamePlayIntent",e,n,o),c()(document).trigger("playButton:gamePlayIntent")},SendDevelopIntent:function(e,n){O("developIntent",e,n)},SendInstallBegin:function(e,n){O("installBegin",e,n)},SendInstallSuccess:function(e,n){O("installSuccess",e,n)},SendClientStartAttempt:function(e,n){O("clientStartAttempt",e,n)},SendClientStartSuccessWeb:function(e,n){O("clientStartSuccessWeb",e,n)},SendManualDownloadClick:function(e,n){O("manualDownload",e,n)}});var N=B,F={logToConsoleEnabled:!1,logToGAEnabled:!0,logToEphemeralCountersEnabled:!0},j={};j[k.startClientAttemptedEvent]=["GameLaunchAttempt_<os>","GameLaunchAttempt_<os>_<launchmethod>"],j[k.startClientSucceededEvent]=["GameLaunchSuccessWeb_<os>","GameLaunchSuccessWeb_<os>_<launchmethod>"];var H={};d.GaEventSettings.gaLaunchAttemptAndLaunchSuccessEnabled&&(H[k.startClientAttemptedEvent]="Launch Attempt",H[k.startClientSucceededEvent]="Launch Success"),H[k.beginInstallEvent]="Install Begin",H[k.successfulInstallEvent]="Install Success",H[k.manualDownloadEvent]="Manual Download";var V={};function _(e){F.logToConsoleEnabled&&console.log(e)}function q(e,n){var o;F.logToEphemeralCountersEnabled&&("Windows"===(o=c()("#PlaceLauncherStatusPanel").data("os-name"))&&(o="Win32"),e=(e=e.replace("<os>",o)).replace("<launchmethod>",n),null!==(n=window.EventTracker)&&void 0!==n&&n.fireEvent&&window.EventTracker.fireEvent(e))}function z(e,n,o,t){void 0!==window.GoogleAnalyticsEvents&&F.logToGAEnabled&&window.GoogleAnalyticsEvents.FireEvent&&window.GoogleAnalyticsEvents.FireEvent([e,n,o,t])}function W(e,o){_("".concat(e.type,": ").concat(JSON.stringify(o))),j[e.type]&&c().each(j[e.type],function(e,n){q(n,o.launchMethod)}),H[e.type]&&z(o.launchMethod,H[e.type],o.params.launchMode,0),"True"===c()("#PlaceLauncherStatusPanel").data("event-stream-for-protocol-enabled")&&V[e.type]&&V[e.type](null,o.params.placeId)}V[k.startClientAttemptedEvent]=N.SendClientStartAttempt,V[k.startClientSucceededEvent]=N.SendClientStartSuccessWeb,V[k.beginInstallEvent]=N.SendInstallBegin,V[k.successfulInstallEvent]=N.SendInstallSuccess,V[k.manualDownloadEvent]=N.SendManualDownloadClick,Object.assign(F,{logToConsole:_,logToEphemeralCounters:q,logToGA:z}),c()(document).ready(function(){var e=[k.startClientAttemptedEvent,k.startClientFailedEvent,k.startClientSucceededEvent,k.beginInstallEvent,k.successfulInstallEvent,k.manualDownloadEvent];c()(k).on(e.join(" "),W)});var J=F,X=function(){var e="click";c()("body").on(e,".VisitButtonPlay, .VisitButtonPlayGLI",function(){var e,n,o,t,a,r=c()(this);(r.hasClass("VisitButtonPlay")||r.hasClass("VisitButtonPlayGLI"))&&(e="PlayButton"),e&&(n=c()(this).attr("placeid"),o=c()(this).data("universe-id"),a=c()(this).data("user-id"),t=c()(this).data("originator-type"),r=c()(this).data("originator-id"),"GameUpdateNotification"===t&&c().ajax({url:"".concat(d.EnvironmentUrls.notificationApi,"/v2/stream-notifications/game-update-notification-interacted"),type:"POST",data:{universeId:o,createdOn:new Date(r),interactionType:"Played",currentUserId:a}}),a=d.UrlParser?d.UrlParser.getParameterValueByName("rbxp"):null,N.SendGamePlayIntent(e,n,a))}),c()("body").on(e,".VisitButtonEdit, .VisitButtonEditGLI",function(){var e=c()(this).attr("placeid");N.SendDevelopIntent("Edit",e)}),c()("#rbx-running-games").on(e,".rbx-game-server-item .rbx-game-server-join",function(){var e=c()(this).data("placeid");e&&N.SendGamePlayIntent("JoinInstance",e)}),c()("#rbx-friends-running-games").on(e,".rbx-friends-game-server-item .rbx-friends-game-server-join",function(){var e=c()(this).data("placeid");e&&N.SendGamePlayIntent("JoinInstance",e)}),c()("#game-instances").on(e,"#rbx-vip-servers .rbx-vip-server-item .rbx-vip-server-join",function(){var e=c()(this).data("placeid");e&&N.SendGamePlayIntent("PrivateServer",e)}),c()("#build-page").on(e,".roblox-edit-button",function(){var e=c()(this).parents("table.item-table"),e=e.data("rootplace-id")||e.data("item-id");e&&N.SendDevelopIntent("Edit",e)})};function K(n,e){var o,t=Object.keys(n);return Object.getOwnPropertySymbols&&(o=Object.getOwnPropertySymbols(n),e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),t.push.apply(t,o)),t}function Y(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?K(Object(a),!0).forEach(function(e){var n,o;n=t,e=a[o=e],o in n?Object.defineProperty(n,o,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[o]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):K(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var Q={isInstalling:!1,statusInterval:0,robloxLocale:"",gameLocale:"",protocolUrlSeparator:"+",protocolUrlIncludesLaunchTime:!1,protocolDetectionEnabled:!1,avatarParamEnabled:!0,separateScriptParamsEnabled:!1,waitTimeBeforeFailure:300,protocolNameForStudio:"roblox-studio",protocolNameForClient:"roblox-client",logger:null,channel:"",studioChannel:"",playerChannel:""},Z={edit:"edit",plugin:"plugin",play:"play",build:"build",app:"app",asset:"asset"};function $(e){return e===Z.edit||e===Z.plugin||e===Z.asset}function ee(e,n){function o(){clearTimeout(i),e()}var t,a,r,l,i=setTimeout(function(){c().modal.close(),function(e,n){var o="True"===d.PlaceLauncher.Resources.RefactorEnabled,t=$(n.launchMode);if(o){t=t?d.PlaceLauncher.Resources.ProtocolHandlerAreYouInstalled.studio:d.PlaceLauncher.Resources.ProtocolHandlerAreYouInstalled.play;return d.Dialog.open({bodyContent:t.content,allowHtmlContentInBody:!0,showAccept:!0,acceptColor:d.Dialog.green,acceptText:t.buttonText,showDecline:!1,dismissable:!1,xToCancel:!0,footerText:t.footerContent,allowHtmlContentInFooter:!0,onAccept:function(){pe(n)},cssClass:"protocolhandler-are-you-installed-modal"})}c()("#ProtocolHandlerAreYouInstalled").modal({escClose:!0,opacity:80,overlayCss:{backgroundColor:"#000"},onClose:function(){e(),c()("#ProtocolHandlerInstallButton").off("click"),c().modal.close()},zIndex:1031}),c()("#ProtocolHandlerInstallButton, #ProtocolHandlerStudioInstallButton").click(function(){pe(n)})}(o,n)},5e3);t=o,a=n.launchMode,r="True"===d.PlaceLauncher.Resources.RefactorEnabled,l=$(a),r?(a=(l?d.PlaceLauncher.Resources.ProtocolHandlerStartingDialog.studio:d.PlaceLauncher.Resources.ProtocolHandlerStartingDialog.play).content,r=d.PlaceLauncher.Resources.ProtocolHandlerStartingDialog.loader,d.Dialog.open({bodyContent:a+r,allowHtmlContentInBody:!0,showAccept:!1,showDecline:!1,dismissable:!1,cssClass:"protocolhandler-starting-modal",onCloseCallback:t,onCancel:function(){t(),c().modal.close()}})):(l?c()(".protocol-handler-container").each(function(){c()(this).find(".play-modal").addClass("hidden"),c()(this).find(".studio-modal").removeClass("hidden")}):c()(".protocol-handler-container").each(function(){c()(this).find(".play-modal").removeClass("hidden"),c()(this).find(".studio-modal").addClass("hidden")}),c()("#ProtocolHandlerStartingDialog").modal({escClose:!0,opacity:80,overlayCss:{backgroundColor:"#000"},onClose:function(){t(),c().modal.close()},zIndex:1031}))}function ne(){c().modal.close(),d.Dialog.open({titleText:d.Lang.VisitGameResources["Heading.ErrorStartingGame"],bodyContent:d.Lang.VisitGameResources["Response.Dialog.ErrorLaunching"],acceptText:d.Lang.ControlsResources["Action.OK"]||"OK",showDecline:!1})}function oe(n){var o=new(c().Deferred);return clearInterval(Q.statusInterval),Q.statusInterval=setInterval(function(){var e=d.Endpoints.getAbsoluteUrl("/client-status");c().ajax(e,{success:function(e){"Unknown"!==e&&(o.resolve(n),clearInterval(Q.statusInterval))},cache:!1})},3e3),o}function te(e){c().modal.close();e={launchMethod:"Protocol",params:e};c()(k).trigger(k.startClientSucceededEvent,e),Q.isInstalling&&(c()(k).trigger(k.successfulInstallEvent,e),Q.isInstalling=!1)}function ae(e){return!1}function re(e){var n;Q.protocolDetectionEnabled&&void 0!==navigator.msLaunchUri?navigator.msLaunchUri(e,function(){},function(){}):(0<(n=c()("iframe#gamelaunch")).length&&n.remove(),n=c()("<iframe id='gamelaunch' class='hidden'></iframe>").attr("src",e),c()("body").append(n),n=new Event("ProtocolLaunchStartSelenium"),window.dispatchEvent(n))}function le(e){var n,o=new(c().Deferred),t=Q.protocolUrlSeparator,a="".concat(e.protocolName,":"),r=[];return r.push(1),r.push("launchmode:".concat(e.launchMode)),!e.gameInfo||e.protocolName===Q.protocolNameForStudio&&0===e.gameInfo.indexOf("Guest:")||r.push("gameinfo:".concat(encodeURIComponent(e.gameInfo))),Q.protocolUrlIncludesLaunchTime&&r.push("launchtime:".concat(e.launchTime)),"True"===d.PlaceLauncher.Resources.IsProtocolHandlerBaseUrlParamEnabled&&(n=d.EnvironmentUrls.websiteUrl||"https://".concat(window.location.host),r.push("baseUrl:".concat(encodeURIComponent(n)))),c().each(e.otherParams,function(e,n){e===n?r.push(e):r.push("".concat(e,":").concat(encodeURIComponent(n)))}),a+=r.join(t),k.gameLaunchLogger&&k.gameLaunchLogger.logToConsole("launchProtocolUrl: ".concat(JSON.stringify({url:a,params:e}))),re(a),o.resolve(e),o}function ie(e){return c().when((e=e,t=new(c().Deferred),a=Y({},e),d.CurrentUser.isAuthenticated?Q.doAuthTicketRequest().then(function(e,n,o){o=o.getResponseHeader("RBX-Authentication-Ticket");return o&&0<o.length?(a.gameInfo=o,t.resolve(a)):t.reject(),t}):(t.resolve(a),t)),(e=d.Endpoints.getAbsoluteUrl("/client-status/set?status=Unknown"),c().ajax({method:"POST",url:e}))).then(le,ne).then(oe).then(te,ae);var t,a}function ce(e){return c()(this).hasClass("disabled")||(ie(e.data),void 0===(e=c()("#ProtocolHandlerClickAlwaysAllowed")).data("hideRememberOverlay")&&e.show()),!1}function de(e){e=Y({},e);return e.launchTime=(new Date).getTime(),e.otherParams.browsertrackerid=d.Cookies.getBrowserTrackerId(),e.otherParams.robloxLocale=Q.robloxLocale,e.otherParams.gameLocale=Q.gameLocale,e.otherParams.channel=Q.channel,e.protocolName===Q.protocolNameForStudio?e.otherParams.channel=Q.studioChannel:e.otherParams.channel=Q.playerChannel,c()(k).trigger(k.startClientAttemptedEvent,{launchMethod:"Protocol",params:e}),ee(function(){},e),ie(e)}function se(e,n){var o=" ";d.Endpoints&&d.Endpoints.Urls&&(o="".concat(d.Endpoints.getAbsoluteUrl("/Game/PlaceLauncher.ashx"),"?")),"h"!==o[0]&&(o="http://".concat(window.location.host)+"/Game/PlaceLauncher.ashx?"),o=o.replace("placelauncher","PlaceLauncher");e={request:e,browserTrackerId:d.Cookies.getBrowserTrackerId()};return c().extend(e,n),o+c().param(e)}function ue(e,n,o){return t="Edit.ashx",a=e,e=n,n=o,o=" ",d.Endpoints&&d.Endpoints.Urls&&(o="".concat(d.Endpoints.getAbsoluteUrl("/Game/".concat(t)),"?")),"h"!==o[0]&&(o="http://".concat(window.location.host)+"/Game/".concat(t,"?")),e={placeId:a,upload:n?a:"",universeId:e,testMode:!1},o+c().param(e);var t,a}function ge(){document.getElementById("downloadInstallerIFrame").src="/download/client"}function me(e,n){var o=Y({},e),e=o.gameInfo;void 0!==o.gameInfo&&(o.gameInfo=void 0),c()(k).trigger(k.beginInstallEvent,{launchMethod:"Protocol",params:o}),Q.isInstalling=!0,o.url=window.location.href,void 0!==e&&(o.gameInfo=e),n?document.getElementById("downloadInstallerIFrame").src="/download/studio":ge()}function pe(e){var n=$(e.launchMode);c().modal.close(),n||(d.Dialog.open({titleText:c()("#InstallationInstructions .ph-modal-header .title").text(),allowHtmlContentInBody:!0,bodyContent:c()("#InstallationInstructions .modal-content-container").html(),allowHtmlContentInFooter:!0,footerText:c()("#InstallationInstructions .xsmall").html(),acceptColor:d.Dialog.none,declineColor:d.Dialog.none,cssClass:"install-instructions-modal",xToCancel:!0,onCloseCallback:function(){c()("#ProtocolHandlerClickAlwaysAllowed").hide()}}),setTimeout(function(){c()(".VisitButtonContinueGLI a").removeClass("disabled").click(e,ce)},5e3)),me(e,n)}function he(){c()(k).trigger(k.manualDownloadEvent,{launchMethod:"Protocol",params:{}}),ge()}Object.assign(Q,{joinMultiplayerGame:function(e){var n=Q.protocolNameForClient,o=se("RequestGame",e),t=!0===e.isPlayTogetherGame;return de({protocolName:n,launchMode:"play",otherParams:{placelauncherurl:o},placeId:e.placeId,isPlayTogetherGame:t})},openStudio:function(){var e={};return Q.avatarParamEnabled&&(e.avatar="avatar"),de({protocolName:Q.protocolNameForStudio,launchMode:"edit",otherParams:e})},tryAssetInStudio:function(e){return e={assetid:e},Q.avatarParamEnabled&&(e.avatar="avatar"),de({protocolName:Q.protocolNameForStudio,launchMode:"asset",otherParams:e})},returnToStudio:function(){var e={task:"ReturnFromLogin"};return Q.avatarParamEnabled&&(e.avatar="avatar"),de({protocolName:Q.protocolNameForStudio,launchMode:"edit",otherParams:e})},openPluginInStudio:function(e){e={pluginid:e},Q.avatarParamEnabled&&(e.avatar="avatar"),de({protocolName:Q.protocolNameForStudio,launchMode:"plugin",otherParams:e})},editGameInStudio:function(e,n,o){o=Q.separateScriptParamsEnabled?{task:"EditPlace",placeId:e,universeId:n}:{script:ue(e,n,o)},Q.avatarParamEnabled&&(o.avatar="avatar"),de({protocolName:Q.protocolNameForStudio,launchMode:"edit",otherParams:o,placeId:e})},followPlayerIntoGame:function(e){return de({protocolName:Q.protocolNameForClient,launchMode:"play",otherParams:{placelauncherurl:se("RequestFollowUser",e)}})},joinGameInstance:function(e){var n=Q.protocolNameForClient,o=se("RequestGameJob",e),t=!0===e.isPlayTogetherGame;return de({protocolName:n,launchMode:"play",otherParams:{placelauncherurl:o},placeId:e.placeId,isPlayTogetherGame:t})},joinPrivateGame:function(e){return de({protocolName:Q.protocolNameForClient,launchMode:"play",otherParams:{placelauncherurl:se("RequestPrivateGame",e)},placeId:e.placeId})},playTogetherGame:function(e){return de({protocolName:Q.protocolNameForClient,launchMode:"play",otherParams:{placelauncherurl:se("RequestPlayTogetherGame",e)},placeId:e.placeId,conversationId:e.conversationId})},manualDownload:he,attachManualDownloadToLink:function(){c()("body #GameLaunchManualInstallLink").click(function(){return he(),!1})},startDownload:ge,setLocationHref:re,doAuthTicketRequest:function(){var e="".concat(d.EnvironmentUrls.authApi,"/v1/authentication-ticket/");return c().ajax({method:"POST",url:e,contentType:"application/json"})},openDesktopUniversalApp:function(){var e={},n=Q.protocolNameForClient;return e.protocolName=n,e.launchTime=(new Date).getTime(),e.launchMode=Z.app,e.otherParams={},e.otherParams.browsertrackerid=d.Cookies.getBrowserTrackerId(),e.otherParams.robloxLocale=Q.robloxLocale,e.otherParams.gameLocale=Q.gameLocale,e.otherParams.LaunchExp="InApp",c()(k).trigger(k.startClientAttemptedEvent,{launchMethod:"Protocol",params:e}),ee(function(){},e),ie(e)},showDialog:ee,showLaunchFailureDialog:ne,cleanUpAndLogSuccess:te,cleanUpAndLogFailure:ae}),c()(document).ready(function(){k.setGameLaunchInterface(Q);var e=c()("#PlaceLauncherStatusPanel");Q.protocolNameForClient=e.data("protocol-name-for-client"),Q.protocolNameForStudio=e.data("protocol-name-for-studio"),Q.protocolUrlIncludesLaunchTime=e.data("protocol-url-includes-launchtime"),Q.protocolDetectionEnabled=e.data("protocol-detection-enabled"),Q.separateScriptParamsEnabled=e.data("protocol-separate-script-parameters-enabled"),Q.avatarParamEnabled=e.data("protocol-avatar-parameter-enabled"),Q.robloxLocale=e.data("protocol-roblox-locale"),Q.gameLocale=e.data("protocol-game-locale");var n=e.data("protocol-channel-name");"string"==typeof n&&"LIVE"!==n.toUpperCase()&&(Q.channel=n);n=e.data("protocol-studio-channel-name");"string"==typeof n&&"LIVE"!==n.toUpperCase()&&(Q.studioChannel=n);e=e.data("protocol-player-channel-name");"string"==typeof e&&"LIVE"!==e.toUpperCase()&&(Q.playerChannel=e),Q.logger||void 0===window.Roblox.ProtocolHandlerLogger||(Q.logger=window.Roblox.ProtocolHandlerLogger)}),e=Q,window.Roblox||(window.Roblox={}),Object.assign(window.Roblox,{AuthenticationChecker:i,GameLauncher:k,GameLaunchLogger:J,GamePlayEvents:N,PrerollPlayer:T,ProtocolHandlerClientInterface:e,VideoPreRollDFP:S}),c()(document).ready(function(){X();var e=(0,d.DeviceMeta)();(e.isUWPApp||e.isUniversalApp)&&(window.Roblox.AppHybridClientInterface=r,k.setGameLaunchInterface(r)),k.setGameLaunchLogger(J)})}();
//# sourceMappingURL=https://js.rbxcdn.com/c2b47ebcc43478d279c9-gameLaunch.js.map

/* Bundle detector */
window.Roblox && window.Roblox.BundleDetector && window.Roblox.BundleDetector.bundleDetected("GameLaunch");